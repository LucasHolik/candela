This document outlines the development plan for the Candela project. The primary goal is to build the application in a structured, modular, and expandable way.

**Rules of Engagement:**
1.  We will follow the steps outlined in this plan.
2.  Changes will be small, atomic, and verifiable.
3.  **Only the user will execute `cargo` commands** (`check`, `build`, `run`). After I make a change, I will prompt you to run the necessary command.

### **Revised Project Plan: Candela**

**Our Development Philosophy:**

*   **Small, Atomic Changes:** We will make one logical change at a time.
*   **Verify at Every Step:** After each change, you will run `cargo check` to ensure the project compiles.
*   **Build and Test:** You will run `cargo build` and test the functionality of new features.

---

**Phase 1: Basic UI Window with `egui`**

*   **1.1.** Add `egui` dependencies.
*   **1.2.** Create a `gui.rs` module for an `egui` window.
*   **1.3.** Make the tray icon open this window on left-click.

**Phase 2: Connecting UI to Functionality**

*   **2.1.** Add a brightness slider to the UI.
*   **2.2.** Add a mode switch (Software/Hardware) to the UI.
*   **2.3.** Ensure the UI always reflects the true application state.

**Phase 3: Persistence and Polish**

*   **3.1.** Save and load user settings (mode, brightness).
*   **3.2.** Improve error handling and provide user feedback.
*   **3.3.** Add a final application icon and refine the tray menu.