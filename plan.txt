This document outlines the development plan for the Candela project. The primary goal is to build the application in a structured, modular, and expandable way using professional Windows development practices.

**Rules of Engagement:**
1.  We will follow the steps outlined in this plan.
2.  Changes will be small, atomic, and verifiable.
3.  **Only the user will execute `cargo` commands** (`check`, `build`, `run`). After I make a change, I will prompt you to run the necessary command.

### **Revised Project Plan: Candela**

**Our Development Philosophy:**

*   **Professional Win32 Implementation:** Using native Windows API for system tray functionality and UI components.
*   **Clean Architecture:** Proper separation of concerns with tray, GUI, and business logic modules.
*   **Small, Atomic Changes:** We will make one logical change at a time.
*   **Verify at Every Step:** After each change, you will run `cargo check` to ensure the project compiles.
*   **Build and Test:** You will run `cargo build` and test the functionality of new features.

---

**Current State:** The system tray application shows a simple context menu on right-click and a vertical brightness slider on left-click.

**Phase 1: Connecting UI to Functionality**

*   **1.1.** Implement brightness slider that appears on left-click (COMPLETED using native Win32 controls).
*   **1.2.** Add a mode switch (Software/Hardware) to the UI.
*   **1.3.** Ensure the UI always reflects the true application state.

**Phase 2: Persistence and Polish**

*   **2.1.** Save and load user settings (mode, brightness).
*   **2.2.** Improve error handling and provide user feedback.
*   **2.3.** Add a final application icon and refine the tray menu.

**Technical Architecture:**
- Pure Win32 implementation for tray functionality and UI
- Tray module handles system tray interactions
- GUI module manages slider window creation and interaction
- Brightness module manages brightness control logic
- Global state management for slider window lifecycle